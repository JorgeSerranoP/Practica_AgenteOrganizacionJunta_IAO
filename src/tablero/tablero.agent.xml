<agent xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="tablero"
	package="tablero">

	<imports>
		<import>tablero.creencias.*</import>
		<import>tablero.planes.*</import>
		<import>jadex.runtime.*</import>
		<import>jadex.planlib.*</import>
		<import>jadex.util.*</import>
		<import>jadex.adapter.fipa.*</import>
		<import>java.util.logging.*</import>
		<import>java.util.*</import>
	</imports>
	
	<capabilities>
		<capability name="dfcap" file="jadex.planlib.DF"/>
	</capabilities>

	<beliefs>
		<belief name = "localizaciones_jugador" class = "Localizaciones_jugadores"/>
        <belief name = "marcador_fase" class = "String"/>
		<belief name = "cartas_politicas_jugador" class = "Cartas_politicas_jugador"/>
		<belief name = "tieneMasDe6Cartas" class = "TieneMasDe6CartasCreencia"/>
		<belief name = "exiliado" class = "Exiliado"/>
		<belief name = "excusa_activada" class = "boolean"/>
		<belief name = "cargo_jugador" class = "Cargo_jugador"/>
		<belief name = "cartas_asesinato" class = "Cartas_asesinato"/>
		<belief name = "billetes_jugador" class = "Billetes_jugador"/>
		<belief name = "billetes_jugador_suiza" class = "Billetes_jugador_suiza"/>
		<belief name = "hay_presidente" class = "boolean"/>
		<belief name = "partida_iniciada" class = "boolean"/>
		<belief name = "turno_jugador" class = "Turno_jugador"/>
		<belief name = "numero_jugadores" class = "int"/>
		<belief name = "numero_jugadores_turno_jugado" class = "int"/>
        <belief name = "num_cargos_asignados" class = "Num_cargos_asignados"/>
	</beliefs>

	<goals>
        <achievegoalref name="df_search">
			<concrete ref="dfcap.df_search"/>
		</achievegoalref>
		<achievegoalref name="df_register">
			<concrete ref="dfcap.df_register"/>
		</achievegoalref>
		<performgoal name="moverse_localizacion" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Eleccion_Localizaciones)
            </contextcondition>
        </performgoal>
		<performgoal name="robar_cartas" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Robo_CartasPoliticas)
            </contextcondition>
        </performgoal>
		<performgoal name="descartar_cartas" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase!=Fase_Asesinatos) &amp;&amp; ($beliefbase.marcador_fase!=Fase_Dia_Despues)
            </contextcondition>
        </performgoal>
		<performgoal name="volver_exilio" exclude="never">
            <contextcondition>
                ($beliefbase.exiliado==true)
            </contextcondition>
        </performgoal>
		<performgoal name="exiliarse" exclude="never">
            <contextcondition>
                ($beliefbase.exiliado==false) &amp;&amp; ($beliefbase.marcador_fase==Fase_Eleccion_Localizaciones)
            </contextcondition>
        </performgoal>
		<performgoal name="empezar_golpe" exclude="never">
            <contextcondition>
                (($beliefbase.excusa_activada==true) || ($beliefbase.localizaciones_jugador==true)) &amp;&amp; ($beliefbase.marcador_fase==Fase_Golpe)
                &amp;&amp; ($beliefbase.cargo_jugador!=Presidente)
            </contextcondition>
        </performgoal>
		<performgoal name="intentar_asesinar" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Asesinatos) &amp;&amp; (($beliefbase.cargo_jugador==Ministro) || ($beliefbase.cartas_asesinato &gt; 0))
            </contextcondition>
        </performgoal>
		<performgoal name="descartar_billetes" exclude="never">
            <contextcondition>
                ($beliefbase.billetes_jugador &gt; 0)
            </contextcondition>
        </performgoal>
		<performgoal name="dimitir_presidente" exclude="never">
            <contextcondition>
                ($beliefbase.cargo_jugador==Presidente)
            </contextcondition>
        </performgoal>
		<performgoal name="votar_presidente" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Eleccion_Presidente) &amp;&amp; ($beliefbase.hay_presidente==false)
            </contextcondition>
        </performgoal>
		<performgoal name="operacion_bancaria" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Operaciones_Bancarias) &amp;&amp; ($beliefbase.localizaciones_jugador==Banco) &amp;&amp;
				(($beliefbase.billetes_jugador &gt; 0) || ($beliefbase.billetes_jugador_suiza &gt; 0))
            </contextcondition>
        </performgoal>
		<performgoal name="empezar_partida" exclude="when_succeeded">
            <contextcondition>
                ($beliefbase.partida_iniciada==false)
            </contextcondition>
        </performgoal>
		<performgoal name="jugar_carta" exclude="never">
            <contextcondition>
                ($beliefbase.cartas_politicas_jugador &gt; 0)
            </contextcondition>
        </performgoal>
		<performgoal name="siguiente_turno_jugador" exclude="never">
            <contextcondition>
                ($beliefbase.turnoJugador==true)
            </contextcondition>
        </performgoal>
		<performgoal name="cambiar_fase" exclude="never">
            <contextcondition>
                ($beliefbase.numero_jugadores_turno_jugado==$beliefbase.numero_jugadores)
            </contextcondition>
        </performgoal>
        <performgoal name="asignar_cargo" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Asignacion_Cargos) &amp;&amp; ($beliefbase.cargo_jugador!=Presidente) &amp;&amp; 
                ($beliefbase.num_cargos_asignados &lt; 2)
            </contextcondition>
        </performgoal>
        <performgoal name="recibe_ayuda" exclude="never"> 
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Ayuda_Extranjera) &amp;&amp; ($beliefbase.cargo_jugador==Presidente)
            </contextcondition>
        </performgoal>
        <performgoal name="fase_presupuesto" exclude="never">
            <contextcondition>
                ($beliefbase.marcador_fase==Fase_Presupuesto) &amp;&amp; ($beliefbase.cargo_jugador==Presidente)
            </contextcondition>
        </performgoal>
	</goals>
		
	<plans>
        <plan name="elige_localizacion_plan">
            <body/>
            <trigger> <goal ref="moverse_localizacion"/> </trigger>
        </plan>
		<plan name="robar_cartas_plan">
            <body/>
            <trigger> <goal ref="robar_cartas"/> </trigger>
        </plan>
		<plan name="descartar_cartas_plan">
            <body class="Descartar_cartas_plan"/>
            <trigger> <goal ref="descartar_cartas"/> </trigger>
        </plan>
		<plan name="volver_exilio_plan">
            <body/>
            <trigger> <goal ref="volver_exilio"/> </trigger>
        </plan>
		<plan name="exiliarse_plan">
            <body/>
            <trigger> <goal ref="exiliarse"/> </trigger>
        </plan>
		<plan name="empezar_golpe_plan">
            <body class="Empezar_golpe_plan"/>
            <trigger> <goal ref="empezar_golpe"/> </trigger>
        </plan>
		<plan name="intentar_asesinar_plan">
            <body/>
            <trigger> <goal ref="intentar_asesinar"/> </trigger>
        </plan>
		<plan name="descartar_billetes_plan">
            <body class="Descartar_billetes_plan"/>
            <trigger> <goal ref="descartar_billetes"/> </trigger>
        </plan>
		<plan name="dimitir_presidente_plan">
            <body class="Dimitir_presidente_plan"/>
            <trigger> <goal ref="dimitir_presidente"/> </trigger>
        </plan>
		<plan name="votar_presidente_plan">
            <body/>
            <trigger> <goal ref="votar_presidente"/> </trigger>
        </plan>
		<plan name="operacion_bancaria_plan">
            <body/>
            <trigger> <goal ref="operacion_bancaria"/> </trigger>
        </plan>
		<plan name="empezar_partida_plan">
            <body/>
            <trigger> <goal ref="empezar_partida"/> </trigger>
        </plan>
		<plan name="jugar_carta_plan">
            <body/>
            <trigger> <goal ref="jugar_carta"/> </trigger>
        </plan>
		<plan name="siguiente_turno_plan">
            <body/>
            <trigger> <goal ref="siguiente_turno_jugador"/> </trigger>
        </plan>
		<plan name="cambiar_fase_plan">
            <body/>
            <trigger> <goal ref="cambiar_fase"/> </trigger>
        </plan>
        <plan name="asignar_cargos_plan">
            <body/>
            <trigger> <goal ref="asignar_cargo"/> </trigger>
        </plan>
        <plan name="recibe_ayuda_plan">
            <body class="Recibe_ayuda_plan"/>
            <trigger> <goal ref="recibe_ayuda"/> </trigger>
        </plan>
        <plan name="fase_presupuesto_plan">
            <body/>
            <trigger> <goal ref="fase_presupuesto"/> </trigger>
        </plan>
	</plans>

	<events>
        <messageevent name="requestSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="refuseSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REFUSE</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="AgreeSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.AGREE</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="InformIfSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM_IF</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="informSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="QueryIfSend" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.QUERY_IF</value>
			</parameter>
            <parameter name="language" class="String" direction="fixed">
                <value>SFipa.NUGGETS_XML</value>
            </parameter>
		</messageevent>
		<messageevent name="refuseReceive" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REFUSE</value>
			</parameter>
		</messageevent>
        <messageevent name="requestReceive" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
		</messageevent>
		<messageevent name="QueryIfReceive" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.QUERY_IF</value>
			</parameter>
		</messageevent>
		<messageevent name="agreeReceive" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.AGREE</value>
			</parameter>
		</messageevent>
		<messageevent name="informReceive" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.INFORM</value>
			</parameter>
		</messageevent>
	</events>
	
	<configurations>
		<configuration name="default">
		<beliefs>
			<initialbelief ref="marcador_fase">
                <fact>Fase_Robo_CartasPoliticas</fact>
            </initialbelief>
			<initialbelief ref="excusa_activada">
                <fact>false</fact>
            </initialbelief>
			<initialbelief ref="hay_presidente">
                <fact>false</fact>
            </initialbelief>
			<initialbelief ref="partida_iniciada">
                <fact>false</fact>
            </initialbelief>
			<initialbelief ref="numero_jugadores_turno_jugado">
                <fact>0</fact>
            </initialbelief>
		</beliefs>
		<goals>
			<initialgoal ref="empezar_partida">
            </initialgoal>
            <initialgoal ref="df_register">
				<parameter ref="description"> <value> 
					SFipa.createAgentDescription(null,SFipa.createServiceDescription("tablero","jugador", null))</value></parameter>
			</initialgoal>
		</goals>
		</configuration>
	</configurations>
	
</agent>